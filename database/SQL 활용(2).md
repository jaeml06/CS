### SQL 활용(2)

#### 서브쿼리

서브쿼리는 SELECT문 내에 다시 SELECT문을 사용하는 SQL문

인라인 뷰 : FROM구에 SELECT문을 사용하는 서브쿼리

스칼라 서브쿼리 : SELECT문에 서브쿼리를 사용하는 서브쿼리

WHERE구에 SELECT문을 사용한면 서브쿼리라고 함



##### 단일 행 서브쿼리와 다중 행 서브쿼리

- **단일 행 서브쿼리**

  서브쿼리를 수행하면 그 결과는 반드시 한 행만 조회

  비교 연산자인 =, <=, >=, >, <를 사용

- **다중 행 서브쿼리**

  서브쿼리를 실행하면 그결과는 여러 개의 행이 조회

  다중 행 비교 연산자인 IN, ANY, ALL, EXIST를 사용

  - **IN** : 메인쿼리의 비교조건이 서브쿼리의 결과 중 하나만 동일하면 참

  - **ALL** : 메인 쿼리의 서브 쿠리의 결과 모두 동일하면 참

    ​		  < ALL : 최솟값

    ​		  > ALL : 최댓값

    **ANY** : 메인쿼리의 비교조건이 서브쿼리의 결과 중 하나 이상 동일하면 참

    ​		  < ANY : 하나라도 크게 되면 참

    ​		  > ANY : 하나라도 작게 되면 참

  - **EXIST** : 메인쿼리와 서브쿼리와 결과가 하나라도 존재하면 참



##### 스칼라 서브쿼리

반드시 한 행과 한 칼럼만 반환하는 서브쿼리



##### 연관 서브쿼리

서브쿼리 내에서 메인 쿼리 내의 칼럼을 사용하는 것을 의미



#### 그룹 함수

##### ROLLUP

GROUP BY 칼럼에 대해서 서브토탈을 만들어 줌



##### GROUPING 함수

ROLLUP, CUBE, GROUPING SETS 에서 생성되는 합계값을 구분하기 위해서 만들어진 함수



##### GROUPING SETS 함수

GROUP BY에 나오는 칼럼의 순서와 관계없이 다양한 소계를 만들 수 있음

GROUP BY에 나오는 칼럼의 순서와 관계없이 개별적으로 모두 처리



##### CUBE 함수

CUBE 함수에 제시한 칼럼에 대해서 켤합 가능한 모든 집계를 계산